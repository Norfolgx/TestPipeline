---
- name: Install App
  hosts: localhost
  become: true
  become_user: root
  tasks:
    - name: wget install binary zip
      shell:
        'wget https://download.visualstudio.microsoft.com/download/pr/4609998f-2a88-403e-9273-c0d0529cab86/83bd75418eac15dd751c124ad624f1d7/dotnet-sdk-2.1.701-linux-x64.tar.gz'
    - name: unzip into directory
      shell:
        'mkdir -p $HOME/dotnet && tar zxf dotnet-sdk-2.1.701-linux-x64.tar.gz -C $HOME/dotnet'
    - name: set env root variable
      shell:
        'export DOTNET_ROOT=$HOME/dotnet'
    - name: set env path variable
      shell:
        'export PATH=$PATH:$HOME/dotnet'
    - name: unzip publish.zip
      unarchive:
        src: /home/ec2-user/publish.zip
        dest: /home/ec2-user
        creates: /home/ec2-user/publish
        remote_src: yes
